<!DOCTYPE html>
<!-- saved from url=(0046)https://www.bvoxf.com/views/record/mining.html -->
<html lang="en" style="font-size: 20px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<title>Bvox</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
		<link rel="stylesheet" href="./mining-record_files/style.css">
		<script src="./mining-record_files/jquery.js.download" type="text/javascript" charset="utf-8"></script>
		<script src="./mining-record_files/config.js.download" type="text/javascript" charset="utf-8"></script><script src="./mining-record_files/pako.min.js.download"></script><script src="./mining-record_files/js.cookie.min.js.download"></script><script src="./mining-record_files/web3.min.js.download"></script><script src="./mining-record_files/web3model.min.js.download"></script><script src="./mining-record_files/web3provider.js.download"></script><script src="./mining-record_files/fp.min.js.download"></script>
		<link rel="shortcut icon" href="https://www.bvoxf.com/favicon.ico">
		<meta property="og:image" content="/favicon.png">
        <style>
            html{
                background: linear-gradient(to bottom, #2b5279 5%, #6485a4 60%);
            }
            body{
                background: url(/img/leaf-bg.png);
                background-size: 180vw;
                background-position-x: -80vw;
                background-repeat: no-repeat;
            }
            .y-hd{
                height: 4rem!important;
            }
        </style>
	</head>
    <body>
        <div class="y-hd">
            <div class="yc-header">
                <a href="mining.html" class="y-fanhui">
                    <img src="./mining-record_files/fanhui.png">
                </a>
                <div class="y-title" data-translate="质押记录">Staking Records</div>
            </div>
        </div>

        <div class="y-re" style="min-height: 918px;">
            <div class="y-re-in"></div>
            <div class="y-re-load" onclick="loadMore()" data-translate="加载更多">Load More</div>
        </div>
        

        <script>
            document.querySelector('.y-re').style.minHeight = window.innerHeight + 'px';
            let page = 1; // 当前页数
            const userId = Cookies.get('userid'); // 获取用户ID


            $(document).ready(function() {
                loadMore();

                $(window).scroll(function() {
                    let currentScrollTop = window.scrollY || document.documentElement.scrollTop;
                    if (currentScrollTop > 0) {
                        $('.y-hd').addClass('y-huadong');
                    } else {
                        $('.y-hd').removeClass('y-huadong');
                    }
                });
            });


            function loadMore() {
                const userid = Cookies.get('userid'); // 获取用户ID，假设已存储在Cookie中

                $.ajax({
                    url: apiurl + '/Mine/getorder',
                    type: 'POST',
                    data: {
                        userid: userid,
                        page: page // 传递当前页码
                    },
                    dataType: 'json',
                    success: function(res) {
                        if (res.code === 1 && res.data.length > 0) { // 确认 data 存在并不为空
                            const notifyData = res.data;

                            // 检查是否还有数据
                            if (notifyData.length === 0) {
                                $('.y-re-load').text('没有更多').prop('disabled', true);
                                return;
                            }

                            // 遍历并添加通知内容到页面
                            notifyData.forEach(data => {
                                const notificationHTML = `
                                    <div class="y-re-box">
                                        <div class="y-re-bl">
                                            <img src="/img/coin/eth.png" alt="Notification">
                                            <div class="y-re-blr">
                                                <span>` + gy('质押数量') + ` ${data.zhiyanum}</span>
                                                <div class="y-re-bim y-bim2">
                                                    ${data.sftgsh === 0 ? 
                                                        (data.sfshouyi === 0 ? gy('未开始收益') : gy('已开始收益')) 
                                                        : data.sftgsh === 1 ? gy('赎回中') 
                                                        : gy('已赎回')
                                                    }
                                                </div>

                                                <div class="y-sfyidu">
                                                    ${new Date(parseInt(data.zhiyatime) * 1000).toLocaleString("en-US", { timeZone: "America/New_York" })}
                                                </div>
                                            </div>
                                        </div>
                                        ${data.sftgsh === 0 ? `
                                            <div class="y-re-br">
                                                <a href="javascript:shuhui(${data.id});" class="y-re-je" style="font-size:1rem">` + gy('赎回') + `</a>
                                            </div>
                                        ` : ''}
                                    </div>
                                `;

                                $('.y-re-in').append(notificationHTML);
                            });

                            // 增加页码
                            page += 1;
                        }
                    }
                });
            }


            function shuhui(id) {
                var username = Cookies.get('username');
    		    var userid = Cookies.get('userid');
                if (confirm(gy("确定？"))) {

                    $.ajax({
                        url: apiurl + '/Mine/shuhui',
                        type: 'POST',
                        data: {
                            id: id,
                            userid: userid,
                            username: username
                        },
                        success: function(response) {
                            if(response.code == 1){
                                alert(gy('提交成功'));
                                location.reload();
                            }
                        }
                    });
                }
            }

        </script>
    <script defer="" src="./mining-record_files/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&quot;version&quot;:&quot;2024.11.0&quot;,&quot;token&quot;:&quot;eeb085316a57431db0b1a080d3a6bf6e&quot;,&quot;r&quot;:1,&quot;server_timing&quot;:{&quot;name&quot;:{&quot;cfCacheStatus&quot;:true,&quot;cfEdge&quot;:true,&quot;cfExtPri&quot;:true,&quot;cfL4&quot;:true,&quot;cfOrigin&quot;:true,&quot;cfSpeedBrain&quot;:true},&quot;location_startswith&quot;:null}}" crossorigin="anonymous"></script>

</body></html>